#!/bin/sh
if [ x"$1" = x"--device-added" -a ! -z "$2" ];
then
	# sleep, becouse slow cameras ._.
	sleep 1
	eval $(udevadm info --query=env --path=${2} | grep -v ' ')
	echo "DEV: '$DEVNAME'"
	[ -z "$BUSNUM" -o -z "$DEVNUM" ] && continue
	if [ x"$DEVTYPE" = x"usb_device" ];
	then
		# is camera
		if [ x"$ID_GPHOTO2" = x"1" ];
		then
			gvfs-mount "gphoto2://[usb:${BUSNUM},${DEVNUM}]"
		fi
	elif [ ! -z "$DEVNAME" -a ! -z "$ID_FS_TYPE" -a x"$ID_FS_USAGE" = x"filesystem" ];
	then
		udisks --mount "$DEVNAME"
	fi
else
	echo $@
fi

